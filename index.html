<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Digital Tools</title>
<style>
  :root{
    --primary:#0ea5a4; --bg:#f6f8fb; --card:#ffffff; --text:#0f172a;
    --border:#e2e8f0; --muted:#64748b; --output-bg:#fefefe; --accent:#06b0af;
    font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  }
  body.dark{
    --bg:#0f172a; --card:#1e293b; --text:#f1f5f9;
    --border:#334155; --muted:#94a3b8; --output-bg:#1e293b;
    --primary:#38bdf8; --accent:#0ea5a4;
  }
  html,body{height:100%;margin:0;background:var(--bg);color:var(--text);}
  .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px;box-sizing:border-box;}
  .card{width:90%;max-width:1400px;min-height:80vh;background:var(--card);border-radius:14px;box-shadow:0 10px 40px rgba(15,23,42,0.08);padding:28px;box-sizing:border-box;display:flex;flex-direction:column;justify-content:flex-start;}
  .topbar{display:flex;justify-content:flex-end;gap:12px;align-items:center;margin-bottom:14px;flex-wrap:wrap;}
  select, button, input[type=number]{font:inherit;border-radius:10px;border:1px solid var(--border);padding:8px 12px;background:var(--card);color:var(--text);outline:none;}
  button{cursor:pointer;}
  .primary{background:var(--primary);color:#fff;border:none;}
  .primary:hover{background:var(--accent);}
  h1{text-align:center;margin:6px 0 14px;font-size:28px;color:var(--primary);}
  nav{display:flex;gap:10px;justify-content:center;margin-bottom:16px;flex-wrap:wrap;}
  nav button{padding:10px 14px;border-radius:12px;border:none;background:var(--primary);color:#fff;font-weight:600;cursor:pointer;}
  nav button:hover{background:var(--accent);}
  .box{border-radius:12px;padding:16px;border:1px solid var(--border);background:var(--output-bg);box-shadow:inset 0 2px 6px rgba(0,0,0,0.02);}
  .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:8px;}
  .output{margin-top:12px;border-radius:10px;border:1px solid var(--border);padding:12px;min-height:180px;max-height:600px;overflow:auto;background:var(--output-bg);}
  .small{font-size:13px;color:var(--muted);}
  section{margin-top:8px;}
  .fraction-box{display:flex;flex-direction:column;}
  .fraction-bar{height:2px;background:#000;margin:2px 0;}
</style>
</head>
<body>
<div class="wrap">
<main class="card" role="main">

  <div class="topbar">
    <select id="langSelect" aria-label="Language selector">
      <option value="en">English</option>
      <option value="fr">Français</option>
      <option value="it">Italiano</option>
      <option value="de">Deutsch</option>
      <option value="es">Español</option>
    </select>
    <button id="darkBtn" onclick="toggleDarkMode()">Dark</button>
  </div>

  <h1 id="title">Digital Tools</h1>

  <nav>
    <button onclick="show('prime')" id="navPrime">Prime Numbers</button>
    <button onclick="show('decomp')" id="navDecomp">Factorization</button>
    <button onclick="show('math')" id="navMath">Math Functions</button>
    <button onclick="show('quadratic')" id="navQuad">Quadratic Solver</button>
    <button onclick="show('fraction')" id="navFrac">Fractions</button>
  </nav>

  <!-- Prime Numbers -->
  <section id="prime">
    <div class="box">
      <h3 id="primeTitle">Prime Numbers</h3>
      <p id="primeText" class="small">Choose a limit to generate prime numbers less than or equal to that limit.</p>
      <div class="row">
        <input id="primeLimit" type="number" min="2" value="100">
        <button class="primary" onclick="generatePrimes()">Calculate</button>
      </div>
      <div class="output" id="primeOutput"></div>
    </div>
  </section>

  <!-- Factorization -->
  <section id="decomp">
    <div class="box">
      <h3 id="decompTitle">Multiplicative Decomposition</h3>
      <p id="decompText" class="small">Enter a number to list all factorizations.</p>
      <div class="row">
        <input id="decompNum" type="number" min="2" value="60">
        <button class="primary" onclick="calcDecomp()">Calculate</button>
      </div>
      <div class="output" id="decompOutput"></div>
    </div>
  </section>

  <!-- Math Functions -->
  <section id="math">
    <div class="box">
      <h3 id="mathTitle">Math Functions</h3>
      <p id="mathText" class="small">Enter numbers to calculate various math operations.</p>
      <div class="row">
        <input id="mathInput1" type="number" placeholder="Number 1">
        <input id="mathInput2" type="number" placeholder="Number 2">
        <select id="mathOperation"></select>
        <button class="primary" onclick="calcMath()">Calculate</button>
      </div>
      <div class="output" id="mathOutput"></div>
    </div>
  </section>

  <!-- Quadratic Solver -->
  <section id="quadratic">
    <div class="box">
      <h3 id="quadTitle">Quadratic Solver</h3>
      <p id="quadText" class="small">Enter coefficients a, b, and c to solve ax² + bx + c = 0.</p>
      <div class="row">
        <input id="quadA" type="number" placeholder="a">
        <input id="quadB" type="number" placeholder="b">
        <input id="quadC" type="number" placeholder="c">
        <button class="primary" onclick="solveQuadratic()">Calculate</button>
      </div>
      <div class="output" id="quadOutput"></div>
    </div>
  </section>

  <!-- Fraction Calculator -->
  <section id="fraction">
    <div class="box">
      <h3>Fraction Calculator</h3>
      <p class="small">Addition, subtraction, multiplication, division, and automatic simplification.</p>
      <div class="row">
        <div class="fraction-box">
          <input id="num1" type="number" placeholder="numerator">
          <div class="fraction-bar"></div>
          <input id="den1" type="number" placeholder="denominator">
        </div>
        <select id="operator">
          <option value="+">+</option>
          <option value="-">−</option>
          <option value="*">×</option>
          <option value="/">÷</option>
        </select>
        <div class="fraction-box">
          <input id="num2" type="number" placeholder="numerator">
          <div class="fraction-bar"></div>
          <input id="den2" type="number" placeholder="denominator">
        </div>
        <button class="primary" onclick="calcFraction()">Calculate</button>
      </div>
      <div id="fractionError" class="small" style="color:#f87171;"></div>
      <div class="output" id="fractionResult" style="display:none;"></div>
    </div>
  </section>

</main>
</div>

<script>
const translations = {
  en:{title:"Digital Tools", navPrime:"Prime Numbers", navDecomp:"Factorization", navMath:"Math Functions", navQuad:"Quadratic Solver"},
  fr:{title:"Outils numériques", navPrime:"Nombres premiers", navDecomp:"Décomposition", navMath:"Fonctions Mathématiques", navQuad:"Solveur Quadratique"},
  it:{title:"Strumenti digitali", navPrime:"Numeri primi", navDecomp:"Scomposizione", navMath:"Funzioni Matematiche", navQuad:"Risolutore Quadratico"},
  de:{title:"Digitale Werkzeuge", navPrime:"Primzahlen", navDecomp:"Faktorisierung", navMath:"Mathematische Funktionen", navQuad:"Quadratischer Löser"},
  es:{title:"Herramientas digitales", navPrime:"Números primos", navDecomp:"Factorización", navMath:"Funciones Matemáticas", navQuad:"Solver Cuadrático"}
};

let currentLang = localStorage.getItem('lang') || 'en';
let isDark = localStorage.getItem('dark')==='1';
const langSelect = document.getElementById('langSelect');
langSelect.value=currentLang;
if(isDark) document.body.classList.add('dark');

function applyTranslations(){
  const t = translations[currentLang];
  document.getElementById('title').textContent=t.title;
  document.getElementById('navPrime').textContent=t.navPrime;
  document.getElementById('navDecomp').textContent=t.navDecomp;
  document.getElementById('navMath').textContent=t.navMath;
  document.getElementById('navQuad').textContent=t.navQuad;
}
applyTranslations();
langSelect.addEventListener('change', e=>{
  currentLang=e.target.value;
  localStorage.setItem('lang',currentLang);
  applyTranslations();
});

function toggleDarkMode(){
  isDark=document.body.classList.toggle('dark');
  localStorage.setItem('dark',isDark?'1':'0');
}

function show(id){
  document.querySelectorAll('section').forEach(s=>s.style.display='none');
  document.getElementById(id).style.display='block';
}
show('prime');

// Prime Numbers
function isPrime(n){if(n<2)return false;for(let i=2;i*i<=n;i++)if(n%i===0)return false;return true;}
function generatePrimes(){
  const limit=Number(document.getElementById('primeLimit').value);
  const out=document.getElementById('primeOutput');
  if(!Number.isFinite(limit)||limit<2){out.textContent='Invalid limit';return;}
  const primes=[];for(let i=2;i<=limit;i++)if(isPrime(i))primes.push(i);
  out.textContent=primes.join(', ');
}

// Factorization
function factorCombinations(n){
  const results=[];
  function helper(curr,start,target){
    if(target===1){if(curr.length)results.push([...curr]);return;}
    for(let i=start;i<=target;i++)if(target%i===0){curr.push(i);helper(curr,i,target/i);curr.pop();}
  }
  helper([],2,n);return results;
}
function calcDecomp(){
  const n=Number(document.getElementById('decompNum').value);
  const out=document.getElementById('decompOutput'); out.innerHTML='';
  if(!Number.isFinite(n)||n<2){out.textContent='Invalid number';return;}
  const combs=factorCombinations(n);
  if(!combs.length){out.textContent='Prime number — no decomposition';return;}
  out.innerHTML=combs.map(c=>c.join(' × ')).join('<br>');
}

// Math Functions
const mathOps = {gcd:'GCD', lcm:'LCM', pow:'Power', mod:'Modulo', add:'Add', sub:'Subtract', sin:'Sin', cos:'Cos', tan:'Tan', factorial:'Factorial', combination:'nCr', permutation:'nPr'};
const mathSelect = document.getElementById('mathOperation');
mathSelect.innerHTML = Object.entries(mathOps).map(([v,l])=>`<option value="${v}">${l}</option>`).join('');
const mathInput2 = document.getElementById('mathInput2');
function updateMathInputs(){
  const unary = ['factorial','sin','cos','tan']; mathInput2.style.display = unary.includes(mathSelect.value)?'none':'inline-block';
}
updateMathInputs();
mathSelect.addEventListener('change', updateMathInputs);

function calcMath(){
  const a=Number(document.getElementById('mathInput1').value);
  const b=Number(document.getElementById('mathInput2').value);
  const op=mathSelect.value;
  const out=document.getElementById('mathOutput');
  function gcd(x,y){return y?gcd(y,x%y):x;}
  function lcm(x,y){return Math.abs(x*y)/gcd(x,y);}
  function factorial(n){if(n<0 || !Number.isInteger(n)) return NaN; let f=1;for(let i=2;i<=n;i++) f*=i;return f;}
  function nCr(n,r){return factorial(n)/(factorial(r)*factorial(n-r));}
  function nPr(n,r){return factorial(n)/factorial(n-r);}
  let res;
  switch(op){
    case 'gcd': res=gcd(a,b); break; case 'lcm': res=lcm(a,b); break; case 'pow': res=Math.pow(a,b); break;
    case 'mod': res=a%b; break; case 'add': res=a+b; break; case 'sub': res=a-b; break;
    case 'sin': res=Math.sin(a*Math.PI/180).toFixed(4); break; case 'cos': res=Math.cos(a*Math.PI/180).toFixed(4); break;
    case 'tan': res=Math.tan(a*Math.PI/180).toFixed(4); break; case 'factorial': res=factorial(a); break;
    case 'combination': res=nCr(a,b); break; case 'permutation': res=nPr(a,b); break; default: res='N/A';
  }
  out.textContent=res;
}

// Quadratic Solver
function solveQuadratic(){
  const a=Number(document.getElementById('quadA').value);
  const b=Number(document.getElementById('quadB').value);
  const c=Number(document.getElementById('quadC').value);
  const out=document.getElementById('quadOutput');
  if(a===0||!Number.isFinite(a)||!Number.isFinite(b)||!Number.isFinite(c)){out.textContent='Invalid number'; return;}
  const d=b*b-4*a*c; let res;
  if(d>0){const r1=(-b+Math.sqrt(d))/(2*a), r2=(-b-Math.sqrt(d))/(2*a); res=`x₁=${r1}, x₂=${r2}`;}
  else if(d===0){res=`x=${-b/(2*a)}`;}
  else{const real=(-b/(2*a)).toFixed(2), imag=(Math.sqrt(-d)/(2*a)).toFixed(2); res=`x₁=${real}+${imag}i, x₂=${real}-${imag}i`;}
  out.textContent=res;
}

// Fraction Calculator
function gcd(a,b){a=Math.abs(a); b=Math.abs(b); while(b!==0){let t=b;b=a%b;a=t;} return a;}
function simplify(num,den){if(den<0){den=-den;num=-num;} const g=gcd(num,den); return {num:num/g, den:den/g};}
function fractionToMixed(num,den){const sign=num<0?-1:1; num=Math.abs(num); const whole=Math.floor(num/den); const rest=num%den; if(whole===0) return (sign<0?"-":"")+rest+"/"+den; if(rest===0) return (sign*whole)+""; return (sign<0?"-":"")+whole+" "+rest+"/"+den;}
function calcFraction(){
  const n1=parseInt(document.getElementById('num1').value), d1=parseInt(document.getElementById('den1').value);
  const n2=parseInt(document.getElementById('num2').value), d2=parseInt(document.getElementById('den2').value);
  const op=document.getElementById('operator').value;
  const err=document.getElementById('fractionError'), box=document.getElementById('fractionResult'); err.textContent=""; box.style.display="none";
  if(isNaN(n1)||isNaN(d1)||isNaN(n2)||isNaN(d2)){err.textContent="Fill all fields"; return;}
  if(d1===0||d2===0){err.textContent="Denominator cannot be zero"; return;}
  let rn, rd;
  if(op==="+"){rn=n1*d2+n2*d1; rd=d1*d2;} else if(op==="-"){rn=n1*d2-n2*d1; rd=d1*d2;} else if(op==="*"){rn=n1*n2; rd=d1*d2;} else if(op==="/"){if(n2===0){err.textContent="Division by zero";return;} rn=n1*d2; rd=d1*n2;}
  const s=simplify(rn,rd); const mixed=fractionToMixed(s.num,s.den); const dec=(s.num/s.den).toFixed(6);
  box.innerHTML=`<b>Simplified:</b> ${s.num}/${s.den}<br><b>Mixed:</b> ${mixed}<br><b>Decimal:</b> ${dec}`; box.style.display="block";
}
</script>
</body>
</html>
